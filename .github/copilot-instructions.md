# Guidance for AI coding agents — ENGR 103

This file contains short, targeted instructions to help a code-writing agent be productive in this repo. Keep changes small and obvious: prefer edits under 300–500 LOC per PR, and always run the site locally after changes.

## Big picture
- This repository is an Astro + Starlight static site (site code in the project root) delivering course materials (C++ course content). The content lives under `src/content/docs/` and is authored as MDX/Markdown.
- UI components are implemented with Astro and Svelte (`src/components/`) — interactive pieces (forms, calculators) usually live as `.svelte` files.
- The site is configured in `astro.config.mjs` (Starlight sidebar config, integrations like sitemap, KaTeX, Mermaid). `src/content/config.ts` declares collections/schema.
- The site is built to `dist/` (static output, do not edit `dist/` directly).

## Preferred developer flows (explicit commands)
- Install deps: `bun install` (this repo uses **bun** — do not use npm/yarn by default).
- Local dev server: `bun run dev` (server at http://localhost:4321 by default).
- Build: `bun run build` (runs `astro check && astro build`).
- Preview build: `bun run preview`.
- Run any astro CLI: `bun run astro -- <command>`.

Extra commands used by repo maintainers:
- Generate PDFs of the site: run the scripts under `pdf/` (e.g. `cd pdf && ./generate-lecture-notes.sh`). These use `npx starlight-to-pdf` against the deployed site.
- Generate slides: `cd slides && npx @marp-team/marp-cli@latest web-graphics.md --pdf --allow-local-files`.

## Conventions & patterns an agent should follow
- Edit content in `src/content/docs/*` — those MDX files are the source of truth. The sidebar and navigation are autogenerated using `astro.config.mjs` settings (see `starlight(...)` autogenerate maps).
- Add interactive UI components in `src/components/` (Svelte or Astro). Examples:
  - `FinancialPlannerForm.svelte` and `LinearEquationsForm.svelte` show typical interactive inputs + reactive calculations.
  - `Latex.astro` uses KaTeX; `Mermaid.astro` initializes client-side mermaid diagrams and expects source in a `<slot />`.
- Small code updates — especially content edits — should keep formatting consistent with existing MDX style (frontmatter minimal, use course style). Avoid large structural changes without a short proposal in the PR description.
- The project uses `@astrojs/starlight` expressive-code plugin for in-page code examples. Preserve the existing presentation and formatting.

## Files & locations to reference in edits
- site config: `astro.config.mjs` (sidebar, site-level integrations)
- content schema: `src/content/config.ts`
- content: `src/content/docs/**` (lectures, studios, assignments) — primary sources to change.
- components: `src/components/*` (Svelte + Astro components) — modify or add interactive snippets here.
- PDF helpers: `pdf/generate-lecture-notes.sh`, `pdf/generate-practicalities.sh`.
- deploy hints: `vercel.json` (plausible analytics rewrites) — be conservative here.

## Do / Don’t notes for AI agents
- DO use `bun` commands for local dev/build tasks and verify builds (`bun run build` → check `dist/`).
- DO produce small, self-contained PRs with clear commit messages and a short description (one-liner change + why).
- DO not edit `dist/` as source — it's generated output.
- DO not replace manual maintainer tasks (e.g. PDF generation, deployment) — add helpful instructions and tests where applicable.
- DON'T introduce new global build tooling without asking (the project expects Astro + Starlight + bun).

## Helpful examples to cite when proposing changes
- To add a new lecture: create `src/content/docs/lectures/<topic>.mdx`, include short frontmatter (title, description), and the markdown content. Starlight will place it in the site via `astro.config.mjs` autogenerate config.
- To add a small interactive utility, add `src/components/YourTool.svelte` and reference it in MDX with an Astro component import.
- For LaTeX/Math: use `src/components/Latex.astro` (KaTeX) rather than importing KaTeX manually.

If anything above is unclear or you want more explicit examples (editor-level snippets, sample PR templates, or tests), tell me which areas you want expanded and I'll update this file. (I'll keep the instructions short and focused to remain helpful during code generation.)
